<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>Galeria: Troféus Esportivos - SD Laser Desing</title>

<!-- Tailwind -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Fontes -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- Swiper (carrossel) -->
<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css"/>

<style>
  :root{
    --brand:#2563EB;
    --accent:#10B981;
    --gold:#C28B37;
    --gold-soft:#E9D6B1;
    --background:#f8fafc;
    --card:#ffffff;
    --text-primary:#0f172a;
    --text-secondary:#64748b;
    --border-color:#e2e8f0;
  }
  html.dark{
    --background:#0b1120;
    --card:#0f172a;
    --text-primary:#e5eefb;
    --text-secondary:#93a2b8;
    --border-color:#1f2a3a;
    --gold:#D0A95B;
    --gold-soft:#6b5a34;
  }
  body{
    font-family:'Inter',sans-serif;
    background:var(--background);
    color:var(--text-primary);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
  }

  /* ====== CARD PREMIUM ====== */
  .portfolio-card{
    background:linear-gradient(180deg, rgba(255,255,255,0.96), rgba(255,255,255,1));
    border:1px solid var(--border-color);
    border-radius:1rem;
    box-shadow:0 12px 26px -18px rgba(0,0,0,.22);
    transition:transform .35s cubic-bezier(.2,.8,.2,1), box-shadow .35s cubic-bezier(.2,.8,.2,1), border-color .35s ease;
    overflow:hidden; display:flex; flex-direction:column;
  }
  .dark .portfolio-card{
    background:linear-gradient(180deg, rgba(15,23,42,0.94), rgba(15,23,42,1));
    box-shadow:0 18px 40px -24px rgba(0,0,0,.65);
  }
  .portfolio-card:hover{
    transform:translateY(-8px);
    box-shadow:0 30px 60px -25px rgba(0,0,0,.28);
    border-color:rgba(194,139,55,.35);
  }

  /* ====== MINI-CARROSSEL NO CARD ====== */
  .portfolio-media{position:relative; overflow:hidden;}
  .product-swiper{width:100%; height:18rem;}
  @media (max-width:640px){ .product-swiper{height:16rem;} }
  .product-swiper .swiper-slide img{
    width:100%; height:100%; object-fit:cover;
    transform:translateZ(0);
    transition:transform .6s cubic-bezier(.2,.8,.2,1), filter .6s ease;
  }
  .portfolio-card:hover .product-swiper .swiper-slide-active img{
    transform:scale(1.045);
    filter:saturate(1.04);
  }
  /* bullets discretos no card */
  .product-swiper .swiper-pagination-bullets{
    bottom:.6rem !important;
  }
  .product-swiper .swiper-pagination-bullet{
    background:rgba(255,255,255,.8); opacity:.7; width:6px; height:6px;
  }
  .product-swiper .swiper-pagination-bullet-active{
    background:#fff; opacity:1; transform:scale(1.15);
    box-shadow:0 0 0 1px rgba(0,0,0,.2);
  }

  /* Linha dourada (sob o título) */
  .gold-sep{
    height:2px; width:40%;
    background:linear-gradient(90deg, transparent, var(--gold), transparent);
    border-radius:9999px;
  }

  /* Botão premium */
  .btn-primary{
    background:linear-gradient(180deg, var(--brand), #1d4ed8);
    color:#fff; border-radius:.8rem;
    font-weight:700; letter-spacing:.01em;
    padding:.9rem 1rem; width:100%;
    display:inline-flex; align-items:center; justify-content:center; gap:.55rem;
    transition:transform .12s ease, filter .2s ease, box-shadow .25s ease;
    box-shadow:0 10px 22px -14px rgba(37,99,235,.65);
  }
  .btn-primary:hover{ filter:saturate(1.06) brightness(1.02); box-shadow:0 16px 28px -16px rgba(37,99,235,.75);}
  .btn-primary:active{ transform:translateY(1px) scale(.997); }
  .btn-primary.added{
    background:linear-gradient(180deg, var(--accent), #0ea371);
    box-shadow:0 10px 22px -14px rgba(16,185,129,.55);
    cursor:default;
  }

  /* Chips filtros */
  .filter-btn{
    padding:8px 18px; border-radius:9999px; white-space:nowrap;
    background:linear-gradient(180deg, #f1f5f9, #e9eef5);
    color:var(--text-secondary); border:1px solid var(--border-color);
    cursor:pointer; font-weight:600; transition:all .22s ease;
  }
  .filter-btn:hover{ transform:translateY(-1px); }
  .filter-btn.active{
    background:linear-gradient(180deg, var(--brand), #1e40af);
    color:#fff; border-color:transparent; box-shadow:0 10px 22px -16px rgba(37,99,235,.55);
  }
  .dark .filter-btn{
    background:linear-gradient(180deg, #0f172a, #0b1627);
    border-color:#1f2a3a; color:var(--text-secondary);
  }

  /* Busca */
  input[type="search"]{
    background:transparent;
    transition:box-shadow .25s ease, border-color .25s ease;
  }
  input[type="search"]:focus{
    box-shadow:0 0 0 4px rgba(37,99,235,.12);
    border-color:var(--brand);
  }

  /* Modal overlay */
  #image-modal{
    --overlay: rgba(2,6,23,.80);
    background:var(--overlay);
    backdrop-filter:blur(6px);
  }

  /* Swiper no modal */
  .modal-swiper{ width:100%; height:70vh; }
  .modal-swiper .swiper-slide img{
    width:100%; height:100%; object-fit:contain;
  }
  .modal-swiper .swiper-button-prev,
  .modal-swiper .swiper-button-next{
    color:#fff;
    text-shadow:0 2px 12px rgba(0,0,0,.45);
  }
  .modal-swiper .swiper-pagination-bullet{ background:rgba(255,255,255,.85); }
  .modal-swiper .swiper-pagination-bullet-active{ background:#fff; }

  /* Toast */
  #toast{ transition:opacity .3s ease, transform .3s ease, visibility .3s ease; visibility:hidden; opacity:0; transform:translate(-50%,20px);}
  #toast.show{ visibility:visible; opacity:1; transform:translate(-50%,0); }

  .swiper-slide{ width:auto; }
</style>
</head>
<body class="text-slate-800">

  <!-- HEADER -->
  <header class="bg-card/80 backdrop-blur-sm shadow-sm sticky top-0 z-50 border-b border-border-color">
    <nav class="container mx-auto px-4 sm:px-6 py-3 flex justify-between items-center">
      <a href="index.html" class="flex items-center gap-3">
        <img src="src/img/1-Photoroom.png" alt="Logo SD Laser Design" class="h-12 w-12 rounded-full">
        <span class="text-xl font-bold text-text-primary">SD Laser Desing</span>
      </a>
      <div class="flex items-center gap-2 sm:gap-4">
        <!-- Theme -->
        <button id="themeToggle" class="p-2 rounded-full hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors" aria-label="Alternar modo de cor">
          <svg id="theme-icon-light" class="w-5 h-5 text-text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg>
          <svg id="theme-icon-dark" class="w-5 h-5 text-text-secondary hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg>
        </button>

        <!-- Cart -->
        <a href="carrinho.html" id="cart-link" class="relative text-text-secondary hover:text-blue-600 transition p-2">
          <svg class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c.51 0 .962-.344 1.087-.835l1.823-6.831a1.5 1.5 0 00-1.423-2.165H4.198M7.5 14.25h11.218M16.5 21a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zm-9 0a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z" />
          </svg>
          <span id="cart-count" class="absolute -top-1 -right-1 bg-red-500 text-white text-xs w-5 h-5 rounded-full flex items-center justify-center border-2 border-white">0</span>
        </a>

        <a href="index.html" class="hidden sm:block text-sm font-semibold text-blue-600 hover:text-blue-700 transition-colors">&larr; Voltar ao Início</a>
      </div>
    </nav>
  </header>

  <!-- MAIN -->
  <main class="container mx-auto px-4 sm:px-6 py-12 lg:py-24">
    <div class="text-center mb-12">
      <h1 class="text-4xl md:text-5xl font-bold text-text-primary">Galeria de Troféus</h1>
      <p class="text-lg text-text-secondary mt-3 max-w-2xl mx-auto">Confira nossos trabalhos em campeonatos e eventos esportivos.</p>
    </div>

    <!-- FILTROS -->
    <section id="filtros" class="mb-12 bg-card p-6 rounded-xl shadow-sm border border-border-color">
      <div class="relative mb-6">
        <input type="search" id="search-input" placeholder="Pesquisar por modelos de troféus..." class="w-full pl-12 pr-4 py-3 rounded-lg border border-border-color text-base bg-transparent">
        <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
          <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
        </div>
      </div>

      <h3 class="text-base font-semibold text-text-primary mb-3">Filtrar por esporte:</h3>
      <div class="swiper-container filter-carousel relative overflow-hidden">
        <div class="swiper-wrapper py-1" id="filter-buttons">
          <div class="swiper-slide"><button class="filter-btn active" data-filter="all">Todos</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="volei">Vôlei</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="futebol">Futebol</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="beach-tennis">Beach Tennis</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="volei-de-areia">Vôlei de Areia</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="natacao">Natação</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="tenis-de-mesa">Tênis de Mesa</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="tenis">Tênis</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="futvolei">Futvôlei</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="truco">Truco</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="basquete">Basquete</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="boxe">Boxe</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="karate">Karatê</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="corrida">Corrida</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="ciclismo">Ciclismo</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="jiu-jitsu">Jiu-Jitsu</button></div>
          <div class="swiper-slide"><button class="filter-btn" data-filter="danca">Dança</button></div>
        </div>
      </div>
    </section>

    <!-- GRID -->
    <section id="fotos">
      <div id="gallery-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-7">

        <!-- ===== CARD EXEMPLO 1 (com 3 fotos) ===== -->
        <div class="portfolio-card" data-category="volei" data-name="Troféu MVP">
          <div class="portfolio-media">
            <div class="swiper product-swiper">
              <div class="swiper-wrapper">
                <div class="swiper-slide"><img src="src/img/MVP 1.jpg" alt="Troféu MVP — vista frontal"></div>
              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>
          <div class="p-6 flex flex-col flex-grow">
            <p class="text-xl font-semibold tracking-tight text-text-primary">Troféu MVP</p>
            <div class="gold-sep mt-2"></div>
            <p class="text-sm text-text-secondary mt-2 flex-grow">Desbravôlei</p>
            <div class="mt-6 pt-4 border-t border-border-color">
              <button class="add-to-cart-btn btn-primary text-sm"></button>
            </div>
          </div>
        </div>

        <!-- ===== CARD EXEMPLO 2 (com 2 fotos) ===== -->
        <div class="portfolio-card" data-category="volei" data-name="Troféu de Vôlei">
          <div class="portfolio-media">
            <div class="swiper product-swiper">
              <div class="swiper-wrapper">
                <div class="swiper-slide"><img src="src/img/volei 1.jpg" alt="Troféu de Vôlei"></div>
                <div class="swiper-slide"><img src="src/img/trofeu volei carrosei 3.jpg" alt="Troféu de Vôlei"></div>
              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>
          <div class="p-6 flex flex-col flex-grow">
            <p class="text-xl font-semibold tracking-tight text-text-primary">Troféu de Vôlei</p>
            <div class="gold-sep mt-2"></div>
            <p class="text-sm text-text-secondary mt-2 flex-grow">Desbravôlei</p>
            <div class="mt-6 pt-4 border-t border-border-color">
              <button class="add-to-cart-btn btn-primary text-sm"></button>
            </div>
          </div>
        </div>

        <!-- ===== Continue os demais cards no mesmo padrão... ===== -->

        <div class="portfolio-card" data-category="beach-tennis" data-name="Troféu beach-tennis">
          <div class="portfolio-media">
            <div class="swiper product-swiper">
              <div class="swiper-wrapper">
                <div class="swiper-slide"><img src="src/img/beach 1.jpg" alt="Troféu Beach-Tennis"></div>
                <div class="swiper-slide"><img src="src/img/beach 2].jpg" alt="Troféu Beach-Tennis"></div>
              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>
          <div class="p-6 flex flex-col flex-grow">
            <p class="text-xl font-semibold tracking-tight text-text-primary">Troféu Beach-Tennis</p>
            <div class="gold-sep mt-2"></div>
            <p class="text-sm text-text-secondary mt-2 flex-grow">Circuito Litoral</p>
            <div class="mt-6 pt-4 border-t border-border-color">
              <button class="add-to-cart-btn btn-primary text-sm"></button>
            </div>
          </div>
        </div>

        <div class="portfolio-card" data-category="futebol" data-name="Troféu Futebol">
          <div class="portfolio-media">
            <div class="swiper product-swiper">
              <div class="swiper-wrapper">
                <div class="swiper-slide"><img src="src/img/trofeu de futebol.jpg" alt="Troféu Hexagonal Futebol — frontal"></div>
                <div class="swiper-slide"><img src="src/img/trofeu de futebol.jpg" alt="Troféu Hexagonal Futebol — detalhe dourado"></div>
              </div>
              <div class="swiper-pagination"></div>
            </div>
          </div>
          <div class="p-6 flex flex-col flex-grow">
            <p class="text-xl font-semibold tracking-tight text-text-primary">Troféu Futebol</p>
            <div class="gold-sep mt-2"></div>
            <p class="text-sm text-text-secondary mt-2 flex-grow">Amostra</p>
            <div class="mt-6 pt-4 border-t border-border-color">
              <button class="add-to-cart-btn btn-primary text-sm"></button>
            </div>
          </div>
        </div>

        <!-- ...adicione os demais seguindo o mesmo markup... -->

      </div>

      <!-- Nenhum resultado -->
      <div id="no-results" class="text-center py-16 hidden">
        <svg class="mx-auto h-12 w-12 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
        <h3 class="mt-4 text-lg font-semibold text-text-primary">Nenhum resultado encontrado</h3>
        <p class="mt-1 text-sm text-text-secondary">Tente ajustar sua busca ou filtro.</p>
      </div>
    </section>
  </main>

  <!-- FOOTER -->
  <footer class="bg-card border-t border-border-color py-6 text-center text-sm text-text-secondary mt-16">
    © <span id="year"></span> SD Laser Design — Todos os direitos reservados.
  </footer>

  <!-- MODAL FULL -->
  <div id="image-modal" class="fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-[999] hidden items-center justify-center p-4 fade-in">
    <div class="bg-card p-4 rounded-xl shadow-xl max-w-5xl w-full relative border border-border-color">
      <button id="close-modal-btn" class="absolute -top-4 -right-4 bg-white dark:bg-slate-600 text-slate-600 dark:text-slate-200 hover:text-slate-900 dark:hover:text-white rounded-full h-10 w-10 flex items-center justify-center text-2xl font-bold shadow-lg transition-colors">&times;</button>

      <!-- Carrossel do Modal -->
      <div class="swiper modal-swiper">
        <div class="swiper-wrapper" id="modal-swiper-wrapper">
          <!-- Slides serão inseridos via JS -->
        </div>
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
        <div class="swiper-pagination"></div>
      </div>

      <p id="modal-caption" class="text-center mt-3 font-semibold text-text-primary"></p>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="fixed left-1/2 bottom-5 bg-slate-800 text-white py-2 px-5 rounded-full shadow-lg text-sm font-medium"></div>

  <!-- WhatsApp -->
  <a href="https://wa.me/5519997255040?text=Olá!%20Vi%20o%20site%20da%20SD%20Laser%20Design%20e%20gostaria%20de%20um%20orçamento." target="_blank" rel="noopener noreferrer" class="fixed bottom-6 right-6 z-40 flex items-center justify-center h-14 w-14 bg-green-500 rounded-full shadow-lg transition-transform hover:scale-110" aria-label="Fale Conosco no WhatsApp">
    <svg class="w-8 h-8 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M16.28 14.53c-.28-.14-1.67-.82-1.92-.92-.25-.09-.44-.14-.62.14-.18.28-.72.92-.88 1.1-.16.18-.32.2-.59.06-.27-.14-1.15-.42-2.19-1.35-.81-.73-1.35-1.63-1.5-1.92-.14-.28-.02-.44.13-.58.13-.13.28-.32.42-.48.14-.16.18-.28.28-.46.09-.18.05-.37-.02-.51s-.62-1.5-.85-2.07c-.23-.57-.46-.49-.62-.5-.16-.02-.34-.02-.53-.02-.18 0-.48.07-.72.35-.25.28-.96.94-1.18 2.22-.22 1.28.66 2.71 1.53 3.65 1.05 1.12 2.33 2.05 4.3 2.86.39.16.7.25.96.32.48.12.92.1.92.1.28 0 .82-.12 1.1-.68.28-.57.28-1.05.2-1.15s-.2-.18-.46-.32z"/></svg>
  </a>

  <!-- Scripts -->
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    // --- ELEMENTOS ---
    const filterButtonsContainer = document.getElementById('filter-buttons');
    const galleryItems = document.querySelectorAll('#gallery-grid .portfolio-card');
    const cartCount = document.getElementById('cart-count');
    const imageModal = document.getElementById('image-modal');
    const modalImg = document.getElementById('modal-img');
    const modalCaption = document.getElementById('modal-caption');
    const closeModalBtn = document.getElementById('close-modal-btn');
    const toast = document.getElementById('toast');
    const modalWrapper = document.getElementById('modal-swiper-wrapper');

    // --- ESTADO ---
    let cart = JSON.parse(localStorage.getItem('sdCart')) || [];
    let modalSwiper = null;

    // --- THEME ---
    const themeToggle = document.getElementById('themeToggle');
    const lightIcon = document.getElementById('theme-icon-light');
    const darkIcon = document.getElementById('theme-icon-dark');
    const applyTheme = (theme) => {
      if (theme === 'dark') { document.documentElement.classList.add('dark'); lightIcon.classList.add('hidden'); darkIcon.classList.remove('hidden'); }
      else { document.documentElement.classList.remove('dark'); lightIcon.classList.remove('hidden'); darkIcon.classList.add('hidden'); }
    };
    themeToggle.addEventListener('click', () => {
      const next = document.documentElement.classList.contains('dark') ? 'light' : 'dark';
      localStorage.setItem('theme', next); applyTheme(next);
    });
    applyTheme(localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark':'light'));

    // --- HELPERS ---
    const addedButtonHTML = `
      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5"/></svg>
      Adicionado
    `;
    const addButtonHTML = `
      <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"/></svg>
      Solicitar Pré-Orçamento
    `;
    const showToast = (msg) => { toast.textContent = msg; toast.classList.add('show'); setTimeout(()=> toast.classList.remove('show'), 2400); };

    // --- CARRINHO ---
    const updateCartCounter = () => {
      const totalItems = cart.reduce((s,i)=> s + (i.quantity||0), 0);
      cartCount.textContent = totalItems;
      cartCount.classList.toggle('hidden', totalItems === 0);
    };
    const saveCart = () => { localStorage.setItem('sdCart', JSON.stringify(cart)); updateCartCounter(); };

    // --- INICIALIZA SWIPERS DOS CARDS ---
    const productSwipers = [];
    document.querySelectorAll('.product-swiper').forEach((el, idx) => {
      const swiper = new Swiper(el, {
        slidesPerView: 1,
        loop: el.querySelectorAll('.swiper-slide').length > 1,   // loop só se tiver mais de 1 foto
        autoplay: el.querySelectorAll('.swiper-slide').length > 1 ? { delay: 2800, disableOnInteraction: false } : false,
        pagination: { el: el.querySelector('.swiper-pagination'), clickable: true },
        speed: 650,
      });
      productSwipers.push(swiper);
    });

    // --- CARDS (botões + abrir modal com carrossel) ---
    function initProductCards(){
      document.querySelectorAll('#gallery-grid .portfolio-card').forEach(card=>{
        const name = card.dataset.name;
        const button = card.querySelector('.add-to-cart-btn');
        const swiperEl = card.querySelector('.product-swiper');
        const slidesImgs = swiperEl.querySelectorAll('.swiper-slide img');

        const updateButtonState = () => {
          const inCart = cart.some(it => it.name === name);
          if(inCart){ button.innerHTML = addedButtonHTML; button.classList.add('added'); button.disabled = true; }
          else { button.innerHTML = addButtonHTML; button.classList.remove('added'); button.disabled = false; }
        };

        button.onclick = () => {
          if(cart.some(it=> it.name===name)) return;
          const meta = card.querySelector('p.text-sm')?.textContent || '';
          const material = meta.replace('Material: ','');
          const imageUrl = slidesImgs[0]?.src || '';
          cart.push({ name, material, imageUrl, quantity: 1 });
          saveCart(); updateButtonState(); showToast('Adicionado ao orçamento!');
        };

        // Abre modal com todas as fotos do card
        swiperEl.addEventListener('click', (e) => {
          // evita abrir modal ao clicar nos bullets
          if (e.target.classList.contains('swiper-pagination-bullet')) return;

          // limpa slides antigos
          modalWrapper.innerHTML = '';
          slidesImgs.forEach(img => {
            const slide = document.createElement('div');
            slide.className = 'swiper-slide';
            slide.innerHTML = `<img src="${img.src}" alt="${img.alt || name}">`;
            modalWrapper.appendChild(slide);
          });

          // legenda = nome do produto
          modalCaption.textContent = name;

          // inicia/atualiza modal swiper
          if (modalSwiper) {
            modalSwiper.update();
            modalSwiper.slideTo(0, 0);
          } else {
            modalSwiper = new Swiper('.modal-swiper', {
              slidesPerView: 1,
              loop: modalWrapper.children.length > 1,
              navigation: { nextEl: '.modal-swiper .swiper-button-next', prevEl: '.modal-swiper .swiper-button-prev' },
              pagination: { el: '.modal-swiper .swiper-pagination', clickable: true },
              speed: 600,
              keyboard: { enabled: true },
            });
          }

          // exibe modal
          imageModal.classList.remove('hidden'); imageModal.classList.add('flex');
        });

        updateButtonState();
      });
    }

    // --- MODAL ---
    const closeModal = ()=>{ imageModal.classList.add('hidden'); imageModal.classList.remove('flex'); };
    document.getElementById('close-modal-btn').addEventListener('click', closeModal);
    imageModal.addEventListener('click', e => { if(e.target===imageModal) closeModal(); });
    document.addEventListener('keydown', e => { if(e.key==='Escape' && !imageModal.classList.contains('hidden')) closeModal(); });

    // --- FILTRO & BUSCA ---
    function filterProducts(){
      const active = document.querySelector('.filter-btn.active').dataset.filter;
      const term = (document.getElementById('search-input').value||'').toLowerCase().trim();
      let visible = 0;
      document.querySelectorAll('#gallery-grid .portfolio-card').forEach(item=>{
        const cat = item.dataset.category, name = item.dataset.name.toLowerCase();
        const ok = (active==='all' || cat===active) && name.includes(term);
        item.style.display = ok ? 'flex':'none'; if(ok) visible++;
      });
      document.getElementById('no-results').classList.toggle('hidden', visible>0);
    }

    filterButtonsContainer.addEventListener('click', e=>{
      if(e.target.matches('.filter-btn')){
        filterButtonsContainer.querySelector('.filter-btn.active').classList.remove('active');
        e.target.classList.add('active'); filterProducts();
      }
    });
    document.getElementById('search-input').addEventListener('input', filterProducts);

    // --- INIT ---
    document.getElementById('year').textContent = new Date().getFullYear();
    new Swiper('.filter-carousel', { slidesPerView:'auto', spaceBetween:10, freeMode:true });
    updateCartCounter(); initProductCards();
  });
  </script>
</body>
</html>
